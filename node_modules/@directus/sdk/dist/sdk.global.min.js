var DirectusSdk=function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(e),o=function(){this.mode="undefined"==typeof window?"json":"cookie"},i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},u.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function c(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var h,l=function(){function t(t,e){this.collection=t,this.transport=e,this.endpoint=t.startsWith("directus_")?"/".concat(t.substring(9)):"/items/".concat(t)}return t.prototype.readOne=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.get("".concat(this.endpoint,"/").concat(encodeURI(t)),{params:e})];case 1:return[2,n.sent().data]}}))}))},t.prototype.readMany=function(t,e){var n;return a(this,void 0,void 0,(function(){var r,o,i,s,a,h;return c(this,(function(c){switch(c.label){case 0:return[4,this.transport.get("/fields/".concat(this.collection))];case 1:return r=c.sent(),o=null===(n=r.data)||void 0===n?void 0:n.find((function(t){return!0===t.schema.is_primary_key})),[4,this.transport.get("".concat(this.endpoint),{params:u({filter:u((h={},h[o.field]={_in:t},h),null==e?void 0:e.filter),sort:(null==e?void 0:e.sort)||o.field},e)})];case 2:return i=c.sent(),s=i.data,a=i.meta,[2,{data:s,meta:a}]}}))}))},t.prototype.readByQuery=function(t){return a(this,void 0,void 0,(function(){var e,n,r;return c(this,(function(o){switch(o.label){case 0:return[4,this.transport.get("".concat(this.endpoint),{params:t})];case 1:return e=o.sent(),n=e.data,r=e.meta,[2,{data:n,meta:r}]}}))}))},t.prototype.createOne=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("".concat(this.endpoint),t,{params:e})];case 1:return[2,n.sent().data]}}))}))},t.prototype.createMany=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("".concat(this.endpoint),t,{params:e})];case 1:return[2,n.sent()]}}))}))},t.prototype.updateOne=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.patch("".concat(this.endpoint,"/").concat(encodeURI(t)),e,{params:n})];case 1:return[2,r.sent().data]}}))}))},t.prototype.updateMany=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.patch("".concat(this.endpoint),{keys:t,data:e},{params:n})];case 1:return[2,r.sent()]}}))}))},t.prototype.updateByQuery=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.patch("".concat(this.endpoint),{query:t,data:e},{params:n})];case 1:return[2,r.sent()]}}))}))},t.prototype.deleteOne=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.delete("".concat(this.endpoint,"/").concat(encodeURI(t)))];case 1:return e.sent(),[2]}}))}))},t.prototype.deleteMany=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.delete("".concat(this.endpoint),t)];case 1:return e.sent(),[2]}}))}))},t}(),p=function(){function t(t){this.transport=t}return t.prototype.create=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/activity/comment",t)];case 1:return[2,e.sent().data]}}))}))},t.prototype.update=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.patch("/activity/comment/".concat(encodeURI(t)),{comment:e})];case 1:return[2,n.sent().data]}}))}))},t.prototype.delete=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.delete("/activity/comment/".concat(encodeURI(t)))];case 1:return e.sent(),[2]}}))}))},t}(),f=function(t){function e(e){var n=t.call(this,"directus_activity",e)||this;return n._comments=new p(n.transport),n}return s(e,t),Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments},enumerable:!1,configurable:!0}),e}(l),d=function(){function t(t){this.transport=t}return t.prototype.readOne=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.get("/collections/".concat(t))];case 1:return[2,e.sent().data]}}))}))},t.prototype.readAll=function(){return a(this,void 0,void 0,(function(){var t,e,n;return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.get("/collections")];case 1:return t=r.sent(),e=t.data,n=t.meta,[2,{data:e,meta:n}]}}))}))},t.prototype.createOne=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/collections",t)];case 1:return[2,e.sent().data]}}))}))},t.prototype.createMany=function(t){return a(this,void 0,void 0,(function(){var e,n,r;return c(this,(function(o){switch(o.label){case 0:return[4,this.transport.post("/collections",t)];case 1:return e=o.sent(),n=e.data,r=e.meta,[2,{data:n,meta:r}]}}))}))},t.prototype.updateOne=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.patch("/collections/".concat(t),e,{params:n})];case 1:return[2,r.sent().data]}}))}))},t.prototype.deleteOne=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.delete("/collections/".concat(t))];case 1:return e.sent(),[2]}}))}))},t}(),v=function(){function t(t){this.transport=t}return t.prototype.readOne=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.get("/fields/".concat(t,"/").concat(e))];case 1:return[2,n.sent().data]}}))}))},t.prototype.readMany=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.get("/fields/".concat(t))];case 1:return[2,e.sent().data]}}))}))},t.prototype.readAll=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/fields")];case 1:return[2,t.sent().data]}}))}))},t.prototype.createOne=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/fields/".concat(t),e)];case 1:return[2,n.sent().data]}}))}))},t.prototype.updateOne=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.patch("/fields/".concat(t,"/").concat(e),n)];case 1:return[2,r.sent().data]}}))}))},t.prototype.deleteOne=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.delete("/fields/".concat(t,"/").concat(e))];case 1:return n.sent(),[2]}}))}))},t}(),y=function(t){function e(e){return t.call(this,"directus_files",e)||this}return s(e,t),e}(l),b=function(t){function e(e){return t.call(this,"directus_folders",e)||this}return s(e,t),e}(l),g=function(t){function e(e){return t.call(this,"directus_permissions",e)||this}return s(e,t),e}(l),_=function(t){function e(e){return t.call(this,"directus_presets",e)||this}return s(e,t),e}(l),m=function(){function t(t){this.transport=t}return t.prototype.readOne=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.get("/relations/".concat(t,"/").concat(e))];case 1:return[2,n.sent().data]}}))}))},t.prototype.readMany=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.get("/relations/".concat(t))];case 1:return[2,e.sent().data]}}))}))},t.prototype.readAll=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/relations")];case 1:return[2,t.sent().data]}}))}))},t.prototype.createOne=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/relations",t)];case 1:return[2,e.sent().data]}}))}))},t.prototype.updateOne=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.patch("/relations/".concat(t,"/").concat(e),{params:n})];case 1:return[2,r.sent().data]}}))}))},t.prototype.deleteOne=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.delete("/relations/".concat(t,"/").concat(e))];case 1:return n.sent(),[2]}}))}))},t}(),w=function(t){function e(e){return t.call(this,"directus_revisions",e)||this}return s(e,t),e}(l),O=function(t){function e(e){return t.call(this,"directus_roles",e)||this}return s(e,t),e}(l),k=function(){function t(t){this.transport=t}return t.prototype.ping=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/server/ping")];case 1:return[2,t.sent().raw]}}))}))},t.prototype.info=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/server/info")];case 1:return[2,t.sent().data]}}))}))},t}(),j=function(){function t(t,e){this.collection=t,this.transport=e,this.endpoint=t.startsWith("directus_")?"/".concat(t.substring(9)):"/items/".concat(t)}return t.prototype.read=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.get("".concat(this.endpoint),{params:t})];case 1:return[2,e.sent().data]}}))}))},t.prototype.update=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.patch("".concat(this.endpoint),t,{params:e})];case 1:return[2,n.sent().data]}}))}))},t}(),P=function(t){function e(e){return t.call(this,"directus_settings",e)||this}return s(e,t),e}(j),x=function(){function t(t){this.transport=t}return t.prototype.send=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.post("/users/invite",{email:t,role:e,invite_url:n})];case 1:return r.sent(),[2]}}))}))},t.prototype.accept=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/users/invite/accept",{token:t,password:e})];case 1:return n.sent(),[2]}}))}))},t}(),R=function(){function t(t){this.transport=t}return t.prototype.generate=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/users/me/tfa/generate",{password:t})];case 1:return[2,e.sent().data]}}))}))},t.prototype.enable=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/users/me/tfa/enable",{secret:t,otp:e})];case 1:return n.sent(),[2]}}))}))},t.prototype.disable=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/users/me/tfa/disable",{otp:t})];case 1:return e.sent(),[2]}}))}))},t}(),T=function(){function t(t){this._transport=t}return Object.defineProperty(t.prototype,"tfa",{get:function(){return this._tfa||(this._tfa=new R(this._transport))},enumerable:!1,configurable:!0}),t.prototype.read=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this._transport.get("/users/me",{params:t})];case 1:return[2,e.sent().data]}}))}))},t.prototype.update=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this._transport.patch("/users/me",t,{params:e})];case 1:return[2,n.sent().data]}}))}))},t}(),q=function(t){function e(e){return t.call(this,"directus_users",e)||this}return s(e,t),Object.defineProperty(e.prototype,"invites",{get:function(){return this._invites||(this._invites=new x(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"me",{get:function(){return this._me||(this._me=new T(this.transport))},enumerable:!1,configurable:!0}),e}(l),S=function(){function t(t){var e=this;this.random={string:function(t){return void 0===t&&(t=32),a(e,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.get("/utils/random/string",{params:{length:t}})];case 1:return[2,e.sent().data]}}))}))}},this.hash={generate:function(t){return a(e,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/utils/hash/generate",{string:t})];case 1:return[2,e.sent().data]}}))}))},verify:function(t,n){return a(e,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/utils/hash/verify",{string:t,hash:n})];case 1:return[2,e.sent().data]}}))}))}},this.transport=t}return t.prototype.sort=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.post("/utils/sort/".concat(encodeURI(t)),{item:e,to:n})];case 1:return r.sent(),[2]}}))}))},t.prototype.revert=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/utils/revert/".concat(encodeURI(t)))];case 1:return e.sent(),[2]}}))}))},t}();t.Meta=void 0,(h=t.Meta||(t.Meta={})).TOTAL_COUNT="total_count",h.FILTER_COUNT="filter_count";var E,I=function(){},U=function(){},A=function(t){function e(n,r){var o,i,s=this;return(s=(null===(o=null==r?void 0:r.errors)||void 0===o?void 0:o.length)?t.call(this,null===(i=null==r?void 0:r.errors[0])||void 0===i?void 0:i.message)||this:t.call(this,(null==n?void 0:n.message)||"Unknown transport error")||this).parent=n,s.response=r,s.errors=(null==r?void 0:r.errors)||[],Object.values(r||{}).some((function(t){return void 0!==t}))||(s.response=void 0),Object.setPrototypeOf(s,e.prototype),s}return s(e,t),e}(Error);!function(t){t.AuthToken="auth_token",t.RefreshToken="auth_refresh_token",t.Expires="auth_expires"}(E||(E={}));var H=function(t){function e(e){var n,r=t.call(this)||this;return r.prefix=null!==(n=null==e?void 0:e.prefix)&&void 0!==n?n:"",r}return s(e,t),Object.defineProperty(e.prototype,"auth_token",{get:function(){return this.get(E.AuthToken)},set:function(t){null===t?this.delete(E.AuthToken):this.set(E.AuthToken,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"auth_expires",{get:function(){var t=this.get(E.Expires);return null===t?null:parseInt(t)},set:function(t){null===t?this.delete(E.Expires):this.set(E.Expires,t.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"auth_refresh_token",{get:function(){return this.get(E.RefreshToken)},set:function(t){null===t?this.delete(E.RefreshToken):this.set(E.RefreshToken,t)},enumerable:!1,configurable:!0}),e}(I),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.values={},e}return s(e,t),e.prototype.get=function(t){var e=this.key(t);return e in this.values?this.values[e]:null},e.prototype.set=function(t,e){return this.values[this.key(t)]=e,e},e.prototype.delete=function(t){var e=this.key(t),n=this.get(t);return e in this.values&&delete this.values[e],n},e.prototype.key=function(t){return"".concat(this.prefix).concat(t)},e}(H),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.get=function(t){var e=localStorage.getItem(this.key(t));return null!==e?e:null},e.prototype.set=function(t,e){return localStorage.setItem(this.key(t),e),e},e.prototype.delete=function(t){var e=this.key(t),n=this.get(e);return n&&localStorage.removeItem(e),n},e.prototype.key=function(t){return"".concat(this.prefix).concat(t)},e}(H),C=function(t){function e(e){var n,o=t.call(this)||this;return o.config=e,o.axios=r.default.create({baseURL:o.config.url,params:o.config.params,headers:o.config.headers,onUploadProgress:o.config.onUploadProgress,withCredentials:!0}),(null===(n=o.config)||void 0===n?void 0:n.beforeRequest)&&(o.beforeRequest=o.config.beforeRequest),o}return s(e,t),e.prototype.beforeRequest=function(t){return t},Object.defineProperty(e.prototype,"url",{get:function(){return this.config.url},enumerable:!1,configurable:!0}),e.prototype.request=function(t,e,n,o){var i,s,u,h,l;return a(this,void 0,void 0,(function(){var a,p,f,d,v;return c(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),a={method:t,url:e,data:n,params:null==o?void 0:o.params,headers:null==o?void 0:o.headers,onUploadProgress:null==o?void 0:o.onUploadProgress},a=this.beforeRequest(a),[4,this.axios.request(a)];case 1:if(p=c.sent(),f={raw:p.data,status:p.status,statusText:p.statusText,headers:p.headers,data:p.data.data,meta:p.data.meta,errors:p.data.errors},p.data.errors)throw new A(null,f);return[2,f];case 2:if(!(d=c.sent())||d instanceof Error==!1)throw d;if(r.default.isAxiosError(d))throw v=null===(i=d.response)||void 0===i?void 0:i.data,new A(d,{raw:null===(s=d.response)||void 0===s?void 0:s.data,status:null===(u=d.response)||void 0===u?void 0:u.status,statusText:null===(h=d.response)||void 0===h?void 0:h.statusText,headers:null===(l=d.response)||void 0===l?void 0:l.headers,data:null==v?void 0:v.data,meta:null==v?void 0:v.meta,errors:null==v?void 0:v.errors});throw new A(d);case 3:return[2]}}))}))},e.prototype.get=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.request("get",t,void 0,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.head=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.request("head",t,void 0,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.options=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.request("options",t,void 0,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.delete=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.request("delete",t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.put=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.request("put",t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.post=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.request("post",t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.patch=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.request("patch",t,e,n)];case 1:return[2,r.sent()]}}))}))},e}(U),J=function(){function t(t){this.transport=t}return t.prototype.request=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/auth/password/request",{email:t,reset_url:e})];case 1:return n.sent(),[2]}}))}))},t.prototype.reset=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/auth/password/reset",{token:t,password:e})];case 1:return n.sent(),[2]}}))}))},t}(),F=function(t){function e(e){var n,r,o,i=t.call(this)||this;return i.autoRefresh=!0,i.msRefreshBeforeExpires=3e4,i.staticToken="",i.timer=null,i._transport=e.transport,i._storage=e.storage,i.autoRefresh=null!==(n=null==e?void 0:e.autoRefresh)&&void 0!==n?n:i.autoRefresh,i.mode=null!==(r=null==e?void 0:e.mode)&&void 0!==r?r:i.mode,i.msRefreshBeforeExpires=null!==(o=null==e?void 0:e.msRefreshBeforeExpires)&&void 0!==o?o:i.msRefreshBeforeExpires,(null==e?void 0:e.staticToken)?(i.staticToken=null==e?void 0:e.staticToken,i.updateStorage({access_token:i.staticToken,expires:null,refresh_token:null})):i.autoRefresh&&i.autoRefreshJob(),i}return s(e,t),Object.defineProperty(e.prototype,"storage",{get:function(){return this._storage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transport",{get:function(){return this._transport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this._storage.auth_token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this.passwords=this.passwords||new J(this._transport)},enumerable:!1,configurable:!0}),e.prototype.resetStorage=function(){this._storage.auth_token=null,this._storage.auth_refresh_token=null,this._storage.auth_expires=null},e.prototype.updateStorage=function(t){var e,n;this._storage.auth_token=t.access_token,this._storage.auth_refresh_token=null!==(e=t.refresh_token)&&void 0!==e?e:null,this._storage.auth_expires=null!==(n=t.expires)&&void 0!==n?n:null},e.prototype.autoRefreshJob=function(){var t=this;if(this.autoRefresh&&this._storage.auth_expires){this.timer&&clearTimeout(this.timer);var e=this._storage.auth_expires-this.msRefreshBeforeExpires;this.timer=setTimeout((function(){return a(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.refresh().catch((function(){}))];case 1:return t.sent(),this.autoRefreshJob(),[2]}}))}))}),e)}},e.prototype.refresh=function(){var t;return a(this,void 0,void 0,(function(){var e,n;return c(this,(function(r){switch(r.label){case 0:return e=this._storage.auth_refresh_token,this.resetStorage(),[4,this._transport.post("/auth/refresh",{refresh_token:"json"===this.mode?e:void 0})];case 1:return n=r.sent(),this.updateStorage(n.data),this.autoRefresh&&this.autoRefreshJob(),[2,{access_token:n.data.access_token,refresh_token:null===(t=n.data)||void 0===t?void 0:t.refresh_token,expires:n.data.expires}]}}))}))},e.prototype.login=function(t){var e;return a(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return this.resetStorage(),[4,this._transport.post("/auth/login",u({mode:this.mode},t),{headers:{Authorization:null}})];case 1:return n=r.sent(),this.updateStorage(n.data),this.autoRefresh&&this.autoRefreshJob(),[2,{access_token:n.data.access_token,refresh_token:null===(e=n.data)||void 0===e?void 0:e.refresh_token,expires:n.data.expires}]}}))}))},e.prototype.static=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this._transport.get("/users/me",{params:{access_token:t},headers:{Authorization:null}})];case 1:return e.sent(),this.updateStorage({access_token:t,expires:null,refresh_token:null}),[2,!0]}}))}))},e.prototype.logout=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return"json"===this.mode&&(t=this._storage.auth_refresh_token||void 0),[4,this._transport.post("/auth/logout",{refresh_token:t})];case 1:return e.sent(),this.updateStorage({access_token:null,expires:null,refresh_token:null}),clearTimeout(this.timer),[2]}}))}))},e}(o),L=function(){function t(t){this.transport=t}return t.prototype.request=function(t,e,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,this.transport.post(t,{query:e,variables:void 0===n?{}:n})];case 1:return[2,r.sent()]}}))}))},t.prototype.items=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.request("/graphql",t,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.system=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.request("/graphql/system",t,e)];case 1:return[2,n.sent()]}}))}))},t}(),z=function(){function t(t,e){var n,r,i,s,a,c,h,l,p,f=this;if(this._url=t,this._options=e,this._items={},this._singletons={},(null===(n=this._options)||void 0===n?void 0:n.storage)&&(null===(r=this._options)||void 0===r?void 0:r.storage)instanceof I)this._storage=this._options.storage;else{var d=null===(i=this._options)||void 0===i?void 0:i.storage,v=null!=d?d:{},y=v.mode,b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(v,["mode"]);"MemoryStorage"===y||"undefined"==typeof window?this._storage=new M(b):this._storage=new B(b)}(null===(s=this._options)||void 0===s?void 0:s.transport)&&(null===(a=this._options)||void 0===a?void 0:a.transport)instanceof U?this._transport=this._options.transport:this._transport=new C(u({url:this.url,beforeRequest:function(t){var e=f.storage.auth_token,n=e?e.startsWith("Bearer ")?String(f.storage.auth_token):"Bearer ".concat(f.storage.auth_token):"";return u(u({},t),{headers:u({Authorization:n},t.headers)})}},null===(c=this._options)||void 0===c?void 0:c.transport)),(null===(h=this._options)||void 0===h?void 0:h.auth)&&(null===(l=this._options)||void 0===l?void 0:l.auth)instanceof o?this._auth=this._options.auth:this._auth=new F(u({transport:this._transport,storage:this._storage},null===(p=this._options)||void 0===p?void 0:p.auth))}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"auth",{get:function(){return this._auth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._storage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transport",{get:function(){return this._transport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activity",{get:function(){return this._activity||(this._activity=new f(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collections",{get:function(){return this._collections||(this._collections=new d(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){return this._fields||(this._fields=new v(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"files",{get:function(){return this._files||(this._files=new y(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"folders",{get:function(){return this._folders||(this._folders=new b(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"permissions",{get:function(){return this._permissions||(this._permissions=new g(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"presets",{get:function(){return this._presets||(this._presets=new _(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relations",{get:function(){return this._relations||(this._relations=new m(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"revisions",{get:function(){return this._revisions||(this._revisions=new w(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roles",{get:function(){return this._roles||(this._roles=new O(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"users",{get:function(){return this._users||(this._users=new q(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"settings",{get:function(){return this._settings||(this._settings=new P(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server||(this._server=new k(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"utils",{get:function(){return this._utils||(this._utils=new S(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphql",{get:function(){return this._graphql||(this._graphql=new L(this.transport))},enumerable:!1,configurable:!0}),t.prototype.singleton=function(t){return this._singletons[t]||(this._singletons[t]=new j(t,this.transport))},t.prototype.items=function(t){return this._items[t]||(this._items[t]=new l(t,this.transport))},t}();return t.ActivityHandler=f,t.Auth=F,t.BaseStorage=H,t.CollectionsHandler=d,t.CommentsHandler=p,t.Directus=z,t.FieldsHandler=v,t.FilesHandler=y,t.FoldersHandler=b,t.IAuth=o,t.IStorage=I,t.ITransport=U,t.ItemsHandler=l,t.LocalStorage=B,t.MemoryStorage=M,t.PermissionsHandler=g,t.PresetsHandler=_,t.RelationsHandler=m,t.RevisionsHandler=w,t.RolesHandler=O,t.ServerHandler=k,t.SettingsHandler=P,t.Transport=C,t.TransportError=A,t.UsersHandler=q,t.UtilsHandler=S,Object.defineProperty(t,"__esModule",{value:!0}),t}({},axios);
//# sourceMappingURL=sdk.global.min.js.map
